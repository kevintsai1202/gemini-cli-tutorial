## 技巧 5：使用檢查點和 /RESTORE 作為復原按鈕

**快速用例：** 如果 Gemini CLI 對您的檔案進行了一系列您不滿意的更改，您可以立即回溯到先前的狀態。在啟動 Gemini 時（或在設定中）啟用檢查點，並使用 `/restore` 命令復原更改，就像輕量級的 Git 復原一樣。`/restore` 會將您的工作區回溯到儲存的檢查點；對話狀態可能會受到檢查點捕獲方式的影響。

Gemini CLI 的檢查點功能充當安全網。啟用後，CLI 會在每次修改檔案的工具執行之前，對您的專案檔案進行快照。如果出現問題，您可以恢復到上次已知的良好狀態。它本質上是 AI 操作的版本控制，而無需您每次都手動提交到 Git。

**如何使用：** 您可以透過使用 `--checkpointing` 標誌啟動 CLI 來開啟檢查點：

```pwsh
gemini --checkpointing
```

或者，您可以透過將其新增到您的配置中（`settings.json` 中的 `“checkpointing”: { “enabled”: true }`）使其成為預設值。一旦啟用，您會注意到每次 Gemini 即將寫入檔案時，它都會顯示類似「檢查點已儲存」的訊息。

如果您隨後發現 AI 進行的編輯有問題，您有兩個選項：

*   運行 `/restore list`（或不帶任何參數的 `/restore`）以查看帶有時間戳和描述的最近檢查點列表。
*   運行 `/restore <id>` 以回溯到特定的檢查點。如果您省略 id 並且只有一個待處理的檢查點，它將預設恢復該檢查點。

例如：

```sh
/restore
```

Gemini CLI 可能會輸出：

```
0: [2025-09-22 10:30:15] 在運行「apply_patch」之前
1: [2025-09-22 10:45:02] 在運行「write_file」之前
```

然後您可以執行 `/restore 0` 以將所有檔案更改（甚至對話上下文）恢復到該檢查點時的狀態。透過這種方式，您可以「復原」Gemini 進行的錯誤程式碼重構或任何其他更改。

**恢復的內容：** 檢查點捕獲了您的工作目錄（Gemini CLI 允許修改的所有檔案）和工作區檔案的狀態（對話狀態也可能根據檢查點的捕獲方式而回溯）。當您恢復時，它會將檔案覆蓋為舊版本，並將對話記憶重置為該快照。這就像讓 AI 代理時光倒流到它走錯路之前。請注意，它不會撤銷外部副作用（例如，如果 AI 運行了資料庫遷移，它無法撤銷），但檔案系統和聊天上下文中的任何內容都是公平的。

**最佳實踐：** 對於非瑣碎的任務，最好保持檢查點開啟。開銷很小，並且可以讓您安心。如果您發現不需要檢查點（一切順利），您可以隨時清除它或讓下一個檢查點覆蓋它。開發團隊建議在多步驟程式碼編輯之前特別使用檢查點。但是，對於關鍵任務專案，您仍然應該使用適當的版本控制 (git) 作為您的主要安全網——將檢查點視為快速復原的便利，而不是完整的 VCS。

本質上，`/restore` 讓您可以自信地使用 Gemini CLI。您可以讓 AI 嘗試大膽的更改，知道您有一個「糟糕」按鈕可以在需要時回溯。

## 技巧 6：閱讀 Google 文件、試算表等。

**快速用例：** 想像您有一個 Google 文件或試算表，其中包含您希望 AI 使用的規格或資料。您可以提供連結，而不是複製貼上內容，並且透過配置的 Workspace MCP 伺服器，Gemini CLI 可以擷取並讀取它。

例如：

```
總結此設計文件中的要求：https://docs.google.com/document/d/<id>
```

Gemini 可以提取該文件的內容並將其納入其回應中。同樣，它也可以透過連結讀取 Google 試算表或雲端硬碟檔案。

**工作原理：** 這些功能通常透過 MCP 整合啟用。Google 的 Gemini CLI 團隊正在開發 Google Workspace 的連接器。一種方法是運行一個小型 MCP 伺服器，該伺服器使用 Google 的 API（Docs API、Sheets API 等）在給定 URL 或 ID 時檢索文件內容。配置後，您可能會有斜線命令或工具，例如 `/read_google_doc` 或只是自動偵測到 Google Docs 連結並調用適當的工具來擷取它。

例如，在 Agent Factory 播客演示中，團隊使用 Google Docs MCP 將摘要直接儲存到文件中——這意味著他們也可以首先讀取文件的內容。實際上，您可能會執行以下操作：

```
@https://docs.google.com/document/d/XYZ12345
```

包含帶有 `@` 的 URL（上下文參考語法）會向 Gemini CLI 發出訊號，以擷取該資源。透過 Google Docs 整合，該文件的內容將被提取，就像它是本機檔案一樣。從那裡，AI 可以總結它、回答有關它的問題，或以其他方式在對話中使用它。

同樣，如果您貼上 Google 雲端硬碟檔案連結，配置正確的雲端硬碟工具可以下載或開啟該檔案（假設已設定權限和 API 存取）。Google 試算表可以透過運行查詢或讀取儲存格範圍的 MCP 提供，使您能夠詢問諸如「此試算表 [連結] 中預算欄的總和是多少？」之類的問題，並讓 AI 計算它。

**設定：** 截至本文撰寫時，Google Workspace 整合可能需要一些調整（獲取 API 憑證、運行 MCP 伺服器，例如 Kanshi Tanaike 描述的伺服器等）。請密切關注官方 Gemini CLI 儲存庫和社群論壇，以獲取現成的擴充功能——例如，官方 Google Docs MCP 可能會作為外掛/擴充功能提供。如果您很想嘗試，可以按照有關如何在 MCP 伺服器中使用 Google API 的指南編寫一個。它通常涉及處理 OAuth（Gemini CLI 支援 MCP 伺服器）然後公開 `read_google_doc` 等工具。

**使用提示：** 當您擁有這些工具時，使用它們可以像在提示中提供連結一樣簡單（AI 可能會自動調用工具來擷取它），或者使用斜線命令，例如 `/doc open <URL>`。檢查 `/tools` 以查看哪些命令可用——Gemini CLI 會列出所有工具和自訂命令。

總之，Gemini CLI 可以超越您的本機檔案系統。無論是 Google 文件、試算表、雲端硬碟還是其他外部內容，您都可以透過參考來提取資料。這個專業技巧可以讓您免於手動複製貼上，並保持上下文流暢——只需參考您需要的文件或資料集，讓 AI 擷取所需的內容。它使 Gemini CLI 成為您所有可存取資訊的真正知識助理，而不僅僅是您磁碟上的檔案。

（注意：存取私人文件當然需要 CLI 具有適當的權限。始終確保任何整合都尊重安全和隱私。在企業環境中，設定此類整合可能涉及額外的身份驗證步驟。）
