## 技巧 3：使用您自己的 MCP 伺服器擴展 GEMINI

**快速用例：** 假設您希望 Gemini 與外部系統或非內建的自訂工具介面——例如，查詢專有資料庫，或與 Figma 設計整合。您可以透過運行自訂模型上下文協定 (MCP) 伺服器並將其插入 Gemini CLI 來實現此目的。MCP 伺服器允許您向 Gemini 新增新工具和功能，從而有效地擴展代理。

Gemini CLI 附帶了幾個開箱即用的 MCP 伺服器（例如，啟用 Google 搜尋、程式碼執行沙盒等），您可以新增自己的伺服器。MCP 伺服器本質上是一個外部程序（它可以是本機腳本、微服務，甚至是雲端端點），它使用簡單的協定來處理 Gemini 的任務。這種架構使 Gemini CLI 具有高度可擴展性。

**MCP 伺服器範例：** 一些社區和 Google 提供的 MCP 整合包括 Figma MCP（用於從 Figma 獲取設計詳細資訊）、剪貼簿 MCP（用於從您的系統剪貼簿讀取/寫入）等。事實上，在內部演示中，Gemini CLI 團隊展示了一個「Google Docs MCP」伺服器，允許將內容直接儲存到 Google Docs。這個想法是，每當 Gemini 需要執行內建工具無法處理的操作時，它可以委派給您的 MCP 伺服器。

上面是 Gemini CLI 與 Figma MCP 結合用於設計 => 程式碼的演示

Chrome 開發者工具 MCP 當然也是最受歡迎的 :)

**如何新增：** 您可以透過 `settings.json` 或使用 CLI 設定 MCP 伺服器。要進行快速設定，請嘗試 CLI 命令：

```pwsh
gemini mcp add myserver --command “python3 my_mcp_server.py” --port 8080
```

這將註冊一個名為「myserver」的伺服器，Gemini CLI 將透過運行給定命令（這裡是一個 Python 模組）在埠 8080 上啟動它。在 `~/.gemini/settings.json` 中，它將在 `mcpServers` 下新增一個條目。例如：

```json
“mcpServers”: {
  “myserver”: {
    “command”: “python3”,
    “args”: [”-m”, “my_mcp_server”, “--port”, “8080”],
    “cwd”: “./mcp_tools/python”,
    “timeout”: 15000
  }
}
```

此配置（基於官方文件）告訴 Gemini 如何啟動 MCP 伺服器以及在哪裡啟動。一旦運行，該伺服器提供的工具將可供 Gemini CLI 使用。您可以使用斜線命令列出所有 MCP 伺服器及其工具：

```sh
/mcp
```

這將顯示任何已註冊的伺服器以及它們公開的工具名稱。

**MCP 的力量：** MCP 伺服器可以提供豐富的多模態結果。例如，透過 MCP 提供的工具可以返回圖像或格式化表格作為 Gemini CLI 回應的一部分。它們還支援 OAuth 2.0，因此您可以透過 MCP 工具安全地連接到 API（例如 Google 的 API、GitHub 等），而無需公開憑證。本質上，如果您可以編寫程式碼，您可以將其包裝為 MCP 工具——將 Gemini CLI 轉變為協調許多服務的中心。

**預設與自訂：** 預設情況下，Gemini CLI 的內建工具涵蓋了很多（讀取檔案、網路搜尋、執行 shell 命令等），但 MCP 讓您可以超越這些。一些高級用戶已經建立了 MCP 伺服器，以與內部系統介面或執行專門的資料處理。例如，您可以擁有一個資料庫 MCP，它提供一個 `/query_db` 工具，用於在公司資料庫上運行 SQL 查詢，或者一個 `jira-mcp`，用於透過自然語言建立工單。

在建立自己的時，請注意安全性：預設情況下，自訂 MCP 工具需要確認，除非您將它們標記為受信任。您可以透過設定 `trust: true`（自動批准其工具操作）或透過將特定安全工具列入白名單並將危險工具列入黑名單來控制安全性。

簡而言之，MCP 伺服器解鎖了無限的整合。它們是一個專業功能，讓 Gemini CLI 成為您的 AI 助理與您需要它協同工作的任何系統之間的橋樑。如果您有興趣建立一個，請查看官方 MCP 指南和社區範例。

## 技巧 4：利用記憶體新增和召回

**快速用例：** 透過將重要事實新增到 AI 的長期記憶中，讓 AI 隨時掌握這些事實。例如，在找出資料庫埠或 API 權杖後，您可以執行：

```sh
/memory add “我們的暫存 RabbitMQ 在埠 5673 上”
```

這將儲存該事實，以便您（或 AI）以後不會忘記它。然後，您可以隨時使用 `/memory show` 召回記憶中的所有內容。

`/memory` 命令提供了一種簡單但強大的持久記憶機制。當您使用 `/memory add <text>` 時，給定的文字會附加到您的專案的全域上下文中（技術上，它會儲存到全域 `~/.gemini/GEMINI.md` 檔案或專案的 `GEMINI.md` 中）。

這有點像記筆記並將其釘在 AI 的虛擬佈告欄上。一旦新增，AI 將始終在提示上下文中看到該筆記，以便在未來的互動中跨會話使用。

考慮一個範例：您正在偵錯一個問題，並發現一個不明顯的見解（「配置標誌 X_ENABLE 必須設定為 true，否則服務將無法啟動」）。如果您將此新增到記憶中，那麼以後如果您或 AI 正在討論相關問題，它就不會忽略這個關鍵細節——它在上下文中。

**使用 /memory：**

*   `/memory add “<text>”` - 將事實或筆記新增到記憶中（持久上下文）。這會立即使用新條目更新 `GEMINI.md`。
*   `/memory show` - 顯示記憶的完整內容（即目前載入的組合上下文檔案）。
*   `/memory refresh` - 從磁碟重新載入上下文（如果您在 Gemini CLI 之外手動編輯了 `GEMINI.md` 檔案，或者有多人協同合作時很有用）。

由於記憶儲存在 Markdown 中，您也可以手動編輯 `GEMINI.md` 檔案以整理或組織資訊。`/memory` 命令是為了方便對話而存在的，因此您無需開啟編輯器。

**專業技巧：** 此功能非常適合「決策日誌」。如果您在聊天期間決定了一種方法或規則（例如，要使用的特定函式庫，或商定的程式碼風格），請將其新增到記憶中。然後 AI 將會記住該決定，並避免以後與之矛盾。這在可能持續數小時或數天的長時間會話中特別有用——透過儲存關鍵點，您可以減輕模型在對話變長時忘記早期上下文的傾向。

另一個用途是個人筆記。由於 `~/.gemini/GEMINI.md`（全域記憶）會載入所有會話，因此您可以在其中放置一般偏好設定或資訊。例如，「用戶名是 Alice。請禮貌地說話，避免使用俚語。」這就像配置 AI 的角色或全域知識。請注意，全域記憶適用於所有專案，因此不要用專案特定資訊來混淆它。

總之，記憶體新增和召回有助於 Gemini CLI 維護狀態。將其視為一個隨著您的專案而增長的知識庫。使用它來避免重複自己，或提醒 AI 否則必須從頭重新發現的事實。
